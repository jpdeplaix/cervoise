#use "topfind"
#require "containers"
#require "containers.unix"

let () = if Array.length Sys.argv <> 2 then assert false

let fmt = Printf.sprintf
let cmd x = CCUnix.with_process_in x ~f:CCIO.read_lines_l

let version = Sys.argv.(1)

let l = [
  fmt "let version = \"%s\"" (String.escaped version);
  "let lib =";
  "  try Sys.getenv \"LABRYS_LIBDIR\"";
  fmt "  with Not_found -> List.hd Labrys_libdir.Sites.labrys";
]

let () = CCIO.write_lines_l stdout l
